function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _sliceIterator(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}function _slicedToArray(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return _sliceIterator(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}!function(J,Y){var U=Y.element.prototype.closest;if(!U){var r=["matches","matchesSelector","webkitMatches","webkitMatchesSelector","msMatches","msMatchesSelector","mozMatches","mozMatchesSelector"].reduce(function(e,t){var n;return null!==(n=e)&&void 0!==n?n:t in document.documentElement?t:null},null);U=function(e){for(var t,n=this[0].parentNode;n!==document.documentElement&&null!=n&&!n[r](e);)n=n.parentNode;return(null===(t=n)||void 0===t?void 0:t[r](e))?Y.element(n):Y.element()}}function X(){var e,t,n,r;return"pageYOffset"in J?{scrollTop:J.pageYOffset,scrollLeft:J.pageXOffset}:{scrollTop:null!==(e=null!==(t=document.documentElement.scrollTop)&&void 0!==t?t:document.body.scrollTop)&&void 0!==e?e:0,scrollLeft:null!==(n=null!==(r=document.documentElement.scrollLeft)&&void 0!==r?r:document.body.scrollLeft)&&void 0!==n?n:0}}function G(e,t){return e===J?"clientWidth"===t?J.innerWidth:J.innerHeight:e[t]}function c(e,t){var n,r;n=t,r="".concat(e," attribute is deprecated. Pass the options object to vs-repeat attribute instead https://github.com/kamilkp/angular-vs-repeat#options"),console.warn("vs-repeat deprecation: ".concat(r),n[0])}var K={latch:!1,container:null,scrollParent:null,size:null,offsetBefore:0,offsetAfter:0,scrolledToBeginning:Y.noop,scrolledToEnd:Y.noop,scrolledToBeginningOffset:0,scrolledToEndOffset:0,scrollMargin:0,horizontal:!1,autoresize:!1,hunked:!1,hunkSize:0},e=Y.module("vs-repeat",[]).directive("vsRepeat",["$compile","$parse",function(D,F){return{restrict:"A",scope:!0,compile:function(t,n){var e="vsRepeatContainer"in n?Y.element(t[0].querySelector(n.vsRepeatContainer)):t,r=e.children(),o=r.eq(0),k=o[0].outerHTML,L="$vs_collection";["vsSize","vsScrollParent","vsSizeProperty","vsHorizontal","vsOffsetBefore","vsOffsetAfter","vsScrolledToEndOffset","vsScrolledToBeginningOffset","vsExcess","vsScrollMargin"].forEach(function(e){e in n&&c(e,t)});var a=_slicedToArray(function(e){for(var t=["ng-repeat","data-ng-repeat","ng-repeat-start","data-ng-repeat-start"],n=0;n<t.length;n++){var r=t[n];if(e.attr(r))return[r,e.attr(r),0<=r.indexOf("-start")]}throw new Error("angular-vs-repeat: no ng-repeat directive on a child element")}(o),3),q=a[0],s=a[1],H=a[2],i=_slicedToArray(/^\s*(\S+)\s+in\s+([\S\s]+?)(track\s+by\s+\S+)?$/.exec(s),4),j=i[1],W=i[2],N=i[3];if(H)for(var l=0,d=r.eq(l);null==d.attr("ng-repeat-end")&&null==d.attr("data-ng-repeat-end");)l++,d=r.eq(l),k+=d[0].outerHTML;return e.empty(),{pre:function(g,e,t){var n;function r(e){if("number"==typeof e.size)e.getSize=function(){return e.size};else{var t=F(String(e.size));e.getSize=function(e){return t(g,_defineProperty({},j,e))}}}g.vsRepeat={options:_extends({},K,null!==(n=g.$eval(t.vsRepeat))&&void 0!==n?n:{})};var m=g.vsRepeat.options;r(m);var R,x=Y.isDefined(t.vsRepeatContainer)?Y.element(e[0].querySelector(t.vsRepeatContainer)):e,o=Y.element(k),a=o[0].tagName.toLowerCase(),y=[],$=Y.element("<"+a+' class="vs-repeat-before-content"></'+a+">"),z=Y.element("<"+a+' class="vs-repeat-after-content"></'+a+">"),b=null===m.size,I=m.scrollParent?"window"===m.scrollParent?Y.element(J):U.call(x,m.scrollParent):x,w=m.horizontal?"clientWidth":"clientHeight",s=m.horizontal?"offsetWidth":"offsetHeight",S=(m.horizontal,m.horizontal?"scrollLeft":"scrollTop");if((g.vsRepeat.totalSize=0)===I.length)throw"Specified scroll parent selector did not match any element";if(g.vsRepeat.$scrollParent=I,g.vsRepeat.sizesCumulative=[],m.debug){var i="window"===m.scrollParent?Y.element(document.body):I,l=Y.element('<div class="vs-repeat-debug-element"></div>');l.css("position","window"===m.scrollParent?"fixed":"absolute"),i.append(l),g.$on("$destroy",function(){l.remove()})}var T,A,O,C,d,c=G(I[0],w)||50;function u(){!y||y.length<1?(g[L]=[],R=0,g.vsRepeat.sizesCumulative=[0]):(R=y.length,m.size?v():f()),_()}function v(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=y.map(function(e){var t;return null!==(t=n)&&void 0!==t?t:m.getSize(e)}),t=0;g.vsRepeat.sizesCumulative=[0].concat(_toConsumableArray(e.map(function(e){return t+=e})))}function f(){b?g.$$postDigest(function(){if(x[0].offsetHeight||x[0].offsetWidth){for(var e=x.children(),t=0,n=!1,r=!1;t<e.length;){if(null!=e[t].attributes[q]||r){if(n||(c=0),n=!0,e[t][s]&&(c+=e[t][s]),!H)break;if(null!=e[t].attributes["ng-repeat-end"]||null!=e[t].attributes["data-ng-repeat-end"])break;r=!0}t++}n&&(v(c),_(),b=!1,g.$root&&!g.$root.$$phase&&g.$digest())}else var o=g.$watch(function(){(x[0].offsetHeight||x[0].offsetWidth)&&(o(),f())})}):v(c)}function M(n){var r=m.horizontal?"width":"height";return["","min-","max-"].reduce(function(e,t){return e["".concat(t).concat(r)]=n,e},{})}function p(){var e=I[0][S];P()&&(g.$digest(),m._ensureScrollIntegrity&&(I[0][S]=e))}function h(){m.autoresize&&(b=!0,f(),g.$root&&!g.$root.$$phase&&g.$digest()),P()&&g.$digest()}function _(){var e;A=T=void 0,O=R,C=0,e=g.vsRepeat.sizesCumulative[R],g.vsRepeat.totalSize=m.offsetBefore+e+m.offsetAfter,P(),g.$emit("vsRepeatReinitialized",g.vsRepeat.startIndex,g.vsRepeat.endIndex)}function B(){var e=G(I[0],w);e!==d&&(_(),g.$root&&!g.$root.$$phase&&g.$digest()),d=e}function E(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:e.length-1,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1;if(e[n]===t)return[n,n,o];if(e[r]===t)return[r,r,o];if(1<r-n){var a=Math.floor((n+r)/2);return e[a]>t?E(e,t,n,a,o+1):E(e,t,a,r,o+1)}return[t>e[r]?r:n,t<e[n]?n:r,o]}function P(){var e,t,n=(e=I[0],t=S,e===J?X()[t]:e[t]),r=G(I[0],w);m.debug&&(r/=2);var o,a,s,i=x[0]===I[0]?0:(o=x[0],a=I[0],s=m.horizontal,o.getBoundingClientRect()[s?"left":"top"]-(a===J?0:a.getBoundingClientRect()[s?"left":"top"])+(a===J?X():a)[s?"scrollLeft":"scrollTop"]),l=g.vsRepeat.startIndex,d=g.vsRepeat.endIndex;if(b&&!m.size)l=0,d=1;else{var c=n-m.offsetBefore-i;l=_slicedToArray(E(g.vsRepeat.sizesCumulative,c-m.scrollMargin),1)[0],l=Math.max(l,0),d=_slicedToArray(E(g.vsRepeat.sizesCumulative,c+m.scrollMargin+r,l),2)[1],d=Math.min(d,R)}O=Math.min(l,O),C=Math.max(d,C),g.vsRepeat.startIndex=m.latch?O:l,g.vsRepeat.endIndex=m.latch?C:d,C<g.vsRepeat.startIndex&&(g.vsRepeat.startIndex=C);var u=!1;if(null==T?u=!0:null==A&&(u=!0),u||(m.hunked?Math.abs(g.vsRepeat.startIndex-T)>=m.hunkSize||0===g.vsRepeat.startIndex&&0!==T?u=!0:(Math.abs(g.vsRepeat.endIndex-A)>=m.hunkSize||g.vsRepeat.endIndex===R&&A!==R)&&(u=!0):u=g.vsRepeat.startIndex!==T||g.vsRepeat.endIndex!==A),u){var v;g[L]=y.slice(g.vsRepeat.startIndex,g.vsRepeat.endIndex),g.$emit("vsRepeatInnerCollectionUpdated",g.vsRepeat.startIndex,g.vsRepeat.endIndex,T,A),m.scrolledToEnd&&(v=y.length-m.scrolledToEndOffset,(g.vsRepeat.endIndex>=v&&A<v||y.length&&g.vsRepeat.endIndex===y.length)&&g.$eval(m.scrolledToEnd)),m.scrolledToBeginning&&(v=m.scrolledToBeginningOffset,g.vsRepeat.startIndex<=v&&T>g.vsRepeat.startIndex&&g.$eval(m.scrolledToBeginning)),T=g.vsRepeat.startIndex,A=g.vsRepeat.endIndex;var f=g.vsRepeat.sizesCumulative[g.vsRepeat.startIndex]+m.offsetBefore,p=g.vsRepeat.sizesCumulative[g.vsRepeat.startIndex+g[L].length]+m.offsetBefore,h=g.vsRepeat.totalSize;$.css(M(f+"px")),z.css(M(h-p+"px"))}return u}m.horizontal?($.css("height","100%"),z.css("height","100%")):($.css("width","100%"),z.css("width","100%")),t.vsRepeatOptions&&g.$watchCollection(t.vsRepeatOptions,function(e){var t=_extends({},m,e);JSON.stringify(t)!==JSON.stringify(m)&&(Object.assign(m,e),r(m),_())}),g.$watchCollection(W,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];y=e,u()}),o.eq(0).attr(q,j+" in "+L+(N?" "+N:"")),o.addClass("vs-repeat-repeated-element"),x.append($),x.append(o),D(o)(g),x.append(z),g.vsRepeat.startIndex=0,g.vsRepeat.endIndex=0,I.on("scroll",p),Y.element(J).on("resize",h),g.$on("$destroy",function(){Y.element(J).off("resize",h),I.off("scroll",p)}),g.$on("vsRepeatTrigger",u),g.$on("vsRepeatResize",function(){b=!0,f()}),g.$on("vsRenderAll",function(){m.latch&&(g.vsRepeat.endIndex!==R?setTimeout(function(){var e=R;C=Math.max(e,C),g.vsRepeat.endIndex=m.latch?C:e,g[L]=y.slice(g.vsRepeat.startIndex,g.vsRepeat.endIndex),A=g.vsRepeat.endIndex,$.css(M(0)),z.css(M(0)),g.$emit("vsRenderAllDone"),g.$root&&!g.$root.$$phase&&g.$digest()}):g.$emit("vsRenderAllDone"))}),g.$watch(function(){"function"==typeof J.requestAnimationFrame?J.requestAnimationFrame(B):B()})}}}}}]);Y.element(document.head).append('<style id="angular-vs-repeat-style">\n\t  \t.vs-repeat-debug-element {\n        top: 50%;\n        left: 0;\n        right: 0;\n        height: 1px;\n        background: red;\n        z-index: 99999999;\n        box-shadow: 0 0 20px red;\n      }\n\n      .vs-repeat-debug-element + .vs-repeat-debug-element {\n        display: none;\n      }\n\n      .vs-repeat-before-content,\n      .vs-repeat-after-content {\n        border: none !important;\n        padding: 0 !important;\n      }\n    </style>'),"undefined"!=typeof module&&module.exports&&(module.exports=e.name)}(window,window.angular);